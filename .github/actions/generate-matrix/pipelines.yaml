####################################################################################################
# This file contains predefined pipelines used by generate-matrix action
# Each item has the following format:
# agent                             used agent for execution, should be one of the CNCF agents on Oracle cloud
# arch                              architecture of the agent
# pipeline                          name of the connected pipeline
# profile                           maven profile used for maven systemtests execution
# timeout                           job's timeout in minutes
# strimzi_use_feature_gates         systemtests configuration of feature gates
# strimzi_rbac_scope                systemtests configuration of RBAC scope
# cluster_operator_install_type     systemtests configuration of Strimzi installation type
# parallel                          number of tests running in parallel
#
# Each of the following items is threatened as a single job that will be executed on specific agent
####################################################################################################
pipelines:
##################
### Regression ###
##################
- agent: "oracle-8cpu-32gb-x86-64"
  arch: "amd64"
  pipeline: "regression"
  profile: "brokers-and-security"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-x86-64"
  arch: "amd64"
  pipeline: "regression"
  profile: "operators"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-x86-64"
  arch: "amd64"
  pipeline: "regression"
  profile: "operands"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-arm64"
  arch: "arm64"
  pipeline: "regression"
  profile: "brokers-and-security"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-arm64"
  arch: "arm64"
  pipeline: "regression"
  profile: "operators"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-arm64"
  arch: "arm64"
  pipeline: "regression"
  profile: "operands"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 4
#############
### Smoke ###
#############
# Smoke pipelines can use smaller agents as the tests are not running in parallel even if configured
- agent: "oracle-4cpu-16gb-x86-64"
  arch: "amd64"
  pipeline: "smoke"
  profile: "smoke"
  timeout: 60
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 1
- agent: "oracle-4cpu-16gb-arm64"
  arch: "arm64"
  pipeline: "smoke"
  profile: "smoke"
  timeout: 60
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 1
###############
### Upgrade ###
###############
- agent: "oracle-4cpu-16gb-x86-64"
  arch: "amd64"
  pipeline: "upgrade"
  profile: "azp_kraft_upgrade"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 1
- agent: "oracle-4cpu-16gb-arm64"
  arch: "arm64"
  pipeline: "upgrade"
  profile: "azp_kraft_upgrade"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 1
- agent: "oracle-4cpu-16gb-x86-64"
  arch: "amd64"
  pipeline: "upgrade"
  profile: "azp_kafka_upgrade"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 1
- agent: "oracle-4cpu-16gb-arm64"
  arch: "arm64"
  pipeline: "upgrade"
  profile: "azp_kafka_upgrade"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 1
##################
### Acceptance ###
##################
# Acceptance pipelines can use smaller agents as the tests are not running in parallel even if configured
- agent: "oracle-4cpu-16gb-x86-64"
  arch: "amd64"
  pipeline: "acceptance"
  profile: "acceptance"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 2
- agent: "oracle-4cpu-16gb-arm64"
  arch: "arm64"
  pipeline: "acceptance"
  profile: "acceptance"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "bundle"
  parallel: 2
#######################
### Acceptance Helm ###
#######################
- agent: "oracle-4cpu-16gb-x86-64"
  arch: "amd64"
  pipeline: "acceptance-helm"
  profile: "acceptance"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "helm"
  parallel: 2
- agent: "oracle-4cpu-16gb-arm64"
  arch: "arm64"
  pipeline: "acceptance-helm"
  profile: "acceptance"
  timeout: 180
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "CLUSTER"
  cluster_operator_install_type: "helm"
  parallel: 2
#######################
### Regression RBAC ###
#######################
- agent: "oracle-8cpu-32gb-x86-64"
  arch: "amd64"
  pipeline: "regression-rbac"
  profile: "brokers-and-security"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "NAMESPACE"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-x86-64"
  arch: "amd64"
  pipeline: "regression-rbac"
  profile: "operators"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "NAMESPACE"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-x86-64"
  arch: "amd64"
  pipeline: "regression-rbac"
  profile: "operands"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "NAMESPACE"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-arm64"
  arch: "arm64"
  pipeline: "regression-rbac"
  profile: "brokers-and-security"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "NAMESPACE"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-arm64"
  arch: "arm64"
  pipeline: "regression-rbac"
  profile: "operators"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "NAMESPACE"
  cluster_operator_install_type: "bundle"
  parallel: 4
- agent: "oracle-8cpu-32gb-arm64"
  arch: "arm64"
  pipeline: "regression-rbac"
  profile: "operands"
  timeout: 480
  strimzi_use_feature_gates: "false"
  strimzi_rbac_scope: "NAMESPACE"
  cluster_operator_install_type: "bundle"
  parallel: 4
