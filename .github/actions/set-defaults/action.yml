name: "Set default variables for system tests"
description: "Set default variables for system tests"

runs:
  using: "composite"
  steps:
    - name: Configure environment variables
      id: set-env
      shell: bash
      env:
        GITHUB_REF_NAME: ${{ github.ref_name }}
        GITHUB_SHA: ${{ github.sha }}
      run: |
        echo "Ref name: $GITHUB_REF_NAME"
        
        echo "COMMIT=$GITHUB_SHA" >> $GITHUB_ENV
        echo "TAG=$GITHUB_REF_NAME" >> $GITHUB_ENV
        
        # Check if we're in a pull request context
        if [[ "${{ github.event.issue.pull_request }}" != "" && "${{ github.event.issue.pull_request }}" != "null" ]]; then
          echo "Detected: Pull Request"
          
          echo "PULL_REQUEST=true" >> $GITHUB_ENV
          echo "DOCKER_ORG=strimzi" >> $GITHUB_ENV
          echo "TAG=pr" >> $GITHUB_ENV
        else
          # Not a PR - use standard Strimzi settings
          echo "PULL_REQUEST=false" >> $GITHUB_ENV
          echo "DOCKER_ORG=strimzi" >> $GITHUB_ENV
          echo "DOCKER_REGISTRY=quay.io" >> $GITHUB_ENV
        fi
